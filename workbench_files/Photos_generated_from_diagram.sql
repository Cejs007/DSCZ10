-- MySQL Script generated by MySQL Workbench
-- Mon May 20 18:13:04 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Member`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Member` (
  `memberID` INT PRIMARY KEY auto_increment,
  `name` VARCHAR(250) NULL,
  `phone` VARCHAR(20) NULL,
  `email` VARCHAR(200) NULL,
  `address` VARCHAR(250) NULL);


-- -----------------------------------------------------
-- Table `mydb`.`Location`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Location` (
  `locationID` INT primary key auto_increment,
  `name` VARCHAR(200) NULL,
  `short_name` VARCHAR(50) NULL);


-- -----------------------------------------------------
-- Table `mydb`.`Album`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Album` (
  `albumID` INT primary key auto_increment,
  `title` VARCHAR(120) NULL,
  `description` INT NULL,
  `view` INT NULL);


-- -----------------------------------------------------
-- Table `mydb`.`Photo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Photo` (
  `photoID` INT primary key auto_increment,
  `title` VARCHAR(120) NULL,
  `description` VARCHAR(250) NULL,
  `privacy` VARCHAR(20) NULL,
  `upload_date` DATE NULL,
  `view` INT NULL,
  `Member_memberID` INT NOT NULL,
  `Location_locationID` INT NOT NULL,
  `Album_albumID` INT NOT NULL,
  INDEX `fk_Photo_Member1_idx` (`Member_memberID` ASC) VISIBLE,
  INDEX `fk_Photo_Location1_idx` (`Location_locationID` ASC) VISIBLE,
  INDEX `fk_Photo_Album1_idx` (`Album_albumID` ASC) VISIBLE,
  CONSTRAINT `fk_Photo_Member1`
    FOREIGN KEY (`Member_memberID`)
    REFERENCES `mydb`.`Member` (`memberID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Photo_Location1`
    FOREIGN KEY (`Location_locationID`)
    REFERENCES `mydb`.`Location` (`locationID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Photo_Album1`
    FOREIGN KEY (`Album_albumID`)
    REFERENCES `mydb`.`Album` (`albumID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `mydb`.`Tag`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Tag` (
  `tagID` INT primary key auto_increment,
  `title` INT NULL,
  `Photo_photoID` INT NOT NULL,
  INDEX `fk_Tag_Photo1_idx` (`Photo_photoID` ASC) VISIBLE,
  CONSTRAINT `fk_Tag_Photo1`
    FOREIGN KEY (`Photo_photoID`)
    REFERENCES `mydb`.`Photo` (`photoID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `mydb`.`Comments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Comments` (
  `commentID` INT primary key auto_increment,
  `post_date` DATE NULL,
  `content` VARCHAR(255) NULL,
  `Photo_photoID` INT NOT NULL,
  INDEX `fk_Comments_Photo_idx` (`Photo_photoID` ASC) VISIBLE,
  CONSTRAINT `fk_Comments_Photo`
    FOREIGN KEY (`Photo_photoID`)
    REFERENCES `mydb`.`Photo` (`photoID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

insert into member (name, phone, email, address) values ("Michal", "42", "michal@michal.cz", "TÄ›rlicko");
select * from Album;